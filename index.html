<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StreamWave Pro | Permanent Turbo Scanner</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#010409">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

  <style>
    :root{
      --bg0:#010409;
      --bg1:#060c14;
      --glass: rgba(255,255,255,0.035);
      --glass2: rgba(255,255,255,0.02);
      --stroke: rgba(255,255,255,0.08);
      --stroke2: rgba(255,255,255,0.05);
      --accent:#22d3ee; /* electric cyan */
      --accent2:#3b82f6; /* electric blue */
      --lime:#a3e635;
      --danger:#ef4444;
    }
    body{
      background:
        radial-gradient(900px 600px at 15% 5%, rgba(34,211,238,0.12), transparent 55%),
        radial-gradient(900px 600px at 90% 10%, rgba(59,130,246,0.12), transparent 55%),
        radial-gradient(700px 500px at 50% 120%, rgba(163,230,53,0.08), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      color: #f8fafc;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Inter", "Helvetica Neue", Arial;
      letter-spacing: 0.2px;
    }
    .glass{
      background: var(--glass);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border: 1px solid var(--stroke2);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.02),
        0 18px 45px rgba(0,0,0,0.55);
    }
    .glass-2{
      background: var(--glass2);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid var(--stroke2);
    }
    .neon-ring{
      box-shadow:
        0 0 0 1px rgba(255,255,255,0.06),
        0 0 50px rgba(34,211,238,0.18),
        0 0 90px rgba(59,130,246,0.12);
    }
    .custom-scroll::-webkit-scrollbar{ width: 6px; }
    .custom-scroll::-webkit-scrollbar-thumb{
      background: linear-gradient(180deg, rgba(34,211,238,0.65), rgba(59,130,246,0.65));
      border-radius: 12px;
    }
    .card{
      transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border-color .16s ease;
      will-change: transform;
    }
    .card:hover{
      transform: translateX(4px) scale(1.01);
      box-shadow: 0 0 22px rgba(59,130,246,0.18);
      border-color: rgba(34,211,238,0.22);
    }
    .active{
      border-left: 4px solid var(--accent);
      background: linear-gradient(90deg, rgba(34,211,238,0.18), rgba(34,211,238,0.03));
      box-shadow: 0 0 24px rgba(34,211,238,0.18);
    }
    .pill{
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    /* Drawer */
    .drawer{
      transform: translateX(105%);
      transition: transform .25s ease;
    }
    .drawer.open{ transform: translateX(0%); }

    /* Progress shimmer */
    .shimmer{
      background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(34,211,238,0.20), rgba(255,255,255,0.05));
      background-size: 200% 100%;
      animation: shimmer 1.2s linear infinite;
    }
    @keyframes shimmer { 0%{background-position: 200% 0} 100%{background-position: -200% 0} }

    /* Toast */
    .toast{
      animation: toastIn .18s ease-out;
    }
    @keyframes toastIn { from{opacity:0; transform: translateY(10px)} to{opacity:1; transform: translateY(0)} }

    /* Scanning dots */
    .scan-dots::after{
      content:"";
      display:inline-block;
      width: 1.8em;
      text-align:left;
      animation: dots 1.3s steps(4, end) infinite;
    }
    @keyframes dots{
      0%{content:""}
      33%{content:"."}
      66%{content:".."}
      100%{content:"..."}
    }
  </style>
</head>

<body class="p-4 md:p-8">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <header class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-2xl glass flex items-center justify-center font-black text-xl neon-ring">
          <span class="mono">SW</span>
        </div>
        <div>
          <h1 class="text-xl md:text-2xl font-black tracking-tight uppercase italic">
            <span class="text-cyan-300">StreamWave</span> <span class="text-white not-italic">Pro</span>
          </h1>
          <p class="text-[11px] text-slate-400 mono">
            Permanent Turbo Scanner ‚Ä¢ Favorites ‚Ä¢ Tags ‚Ä¢ Export/Import ‚Ä¢ PWA
          </p>
        </div>
      </div>

      <div class="flex flex-wrap gap-3 items-center">
        <label class="glass px-5 py-3 rounded-2xl text-xs font-bold cursor-pointer hover:scale-[1.01] transition-all flex items-center gap-2">
          üìÅ Upload (M3U/M3U8/JSON)
          <input type="file" id="upload" accept=".m3u,.m3u8,.json" class="hidden">
        </label>

        <button id="btn-import" class="glass px-4 py-3 rounded-2xl text-xs font-bold hover:scale-[1.01] transition-all">‚á™ Import</button>
        <button id="btn-export-json" class="glass px-4 py-3 rounded-2xl text-xs font-bold hover:scale-[1.01] transition-all">‚¨á Export JSON</button>
        <button id="btn-export-m3u" class="glass px-4 py-3 rounded-2xl text-xs font-bold hover:scale-[1.01] transition-all">‚¨á Export M3U</button>

        <button id="btn-install" class="glass px-4 py-3 rounded-2xl text-xs font-bold hidden">‚ûï Install</button>

        <button id="btn-reset" class="px-4 py-3 rounded-2xl text-xs font-black border border-red-500/40 bg-red-500/10 hover:bg-red-500/20 transition-all">
          RESET
        </button>
      </div>
    </header>

    <!-- Main -->
    <div class="grid grid-cols-12 gap-8">
      <!-- Player / Controls -->
      <div class="col-span-12 lg:col-span-8">
        <div class="glass rounded-[40px] overflow-hidden neon-ring border border-white/10 relative">
          <video id="video" class="w-full aspect-video bg-black" controls autoplay muted playsinline></video>

          <!-- Player tools -->
          <div class="absolute top-3 left-3 flex gap-2">
            <button id="btn-pip" class="glass-2 px-3 py-2 rounded-xl text-[11px] font-bold">PiP</button>
            <button id="btn-copy-url" class="glass-2 px-3 py-2 rounded-xl text-[11px] font-bold">Copy URL</button>
          </div>

          <div class="absolute top-3 right-3 flex gap-2 items-center">
            <select id="quality" class="glass-2 px-3 py-2 rounded-xl text-[11px] font-bold outline-none">
              <option value="-1">Auto</option>
            </select>
          </div>

          <!-- Bottom status bar -->
          <div class="absolute bottom-0 left-0 right-0 p-3 bg-black/35 backdrop-blur flex flex-wrap items-center gap-2 text-[11px]">
            <span class="pill px-3 py-1 rounded-full mono">Volume: <span id="vol-label">‚Äî</span></span>
            <span class="pill px-3 py-1 rounded-full mono">Status: <span id="play-status">Idle</span></span>
            <span class="pill px-3 py-1 rounded-full mono">Active: <span id="active-name">‚Äî</span></span>
          </div>
        </div>

        <!-- Dashboard cards -->
        <div class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="glass p-5 rounded-[28px] border-b-4 border-cyan-400/70">
            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Saved</p>
            <p id="stat-saved" class="text-3xl font-black italic mono">0</p>
          </div>

          <div class="glass p-5 rounded-[28px] border-b-4 border-blue-500/70">
            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Online</p>
            <p id="stat-online" class="text-3xl font-black italic mono">0</p>
          </div>

          <div class="glass p-5 rounded-[28px] border-b-4 border-lime-400/70">
            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Scan</p>
            <p id="stat-scan" class="text-2xl font-black italic">Idle</p>
          </div>

          <div class="glass p-5 rounded-[28px] border-b-4 border-amber-400/70">
            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Last Scan</p>
            <p id="stat-lastscan" class="text-[12px] font-black mono">‚Äî</p>
            <p id="stat-duration" class="text-[11px] text-slate-400 mono">‚Äî</p>
          </div>
        </div>

        <!-- Scan controls -->
        <div class="mt-6 glass p-5 rounded-[28px]">
          <div class="flex flex-col md:flex-row md:items-center gap-4 justify-between">
            <div class="flex items-center gap-3 flex-wrap">
              <button id="btn-start" class="px-4 py-2 rounded-2xl font-black text-xs bg-cyan-400/15 border border-cyan-400/30 hover:bg-cyan-400/20 transition-all">Start Scan</button>
              <button id="btn-pause" class="px-4 py-2 rounded-2xl font-black text-xs glass hover:bg-white/5 transition-all">Pause</button>
              <button id="btn-resume" class="px-4 py-2 rounded-2xl font-black text-xs glass hover:bg-white/5 transition-all">Resume</button>
              <button id="btn-stop" class="px-4 py-2 rounded-2xl font-black text-xs border border-red-500/40 bg-red-500/10 hover:bg-red-500/20 transition-all">Stop</button>

              <label class="flex items-center gap-2 text-xs mono text-slate-300">
                Concurrency
                <input id="concurrency" type="range" min="5" max="30" value="15" class="w-36">
                <span id="concurrency-label" class="pill px-2 py-1 rounded-full">15</span>
              </label>

              <label class="flex items-center gap-2 text-xs mono text-slate-300">
                <input id="skip-dup" type="checkbox" class="accent-cyan-400" checked>
                Skip duplicates
              </label>
            </div>

            <div class="flex-1 min-w-[240px]">
              <div class="flex items-center justify-between text-[11px] text-slate-400 mono mb-2">
                <span>Progress</span>
                <span id="progress-label">0/0</span>
              </div>
              <div class="h-2 rounded-full overflow-hidden bg-white/5 border border-white/10">
                <div id="progress-bar" class="h-full w-0 shimmer"></div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- List / Filters -->
      <div class="col-span-12 lg:col-span-4">

        <div class="flex items-center gap-2 mb-3">
          <input id="search" placeholder="Search channels‚Ä¶" class="glass w-full px-4 py-3 rounded-2xl text-sm outline-none placeholder:text-slate-500" />
        </div>

        <div class="flex flex-wrap gap-2 mb-4">
          <button data-filter="all" class="filter pill px-3 py-2 rounded-2xl text-xs font-bold">All</button>
          <button data-filter="online" class="filter pill px-3 py-2 rounded-2xl text-xs font-bold">Online</button>
          <button data-filter="favorites" class="filter pill px-3 py-2 rounded-2xl text-xs font-bold">Favorites</button>

          <select id="sort" class="pill px-3 py-2 rounded-2xl text-xs font-bold outline-none bg-transparent">
            <option value="newest">Newest</option>
            <option value="az">A‚ÄìZ</option>
            <option value="random">Random</option>
            <option value="lastchecked">Last Checked</option>
          </select>

          <select id="tag-filter" class="pill px-3 py-2 rounded-2xl text-xs font-bold outline-none bg-transparent">
            <option value="">All Tags</option>
          </select>
        </div>

        <div class="flex items-center justify-between mb-2 px-1">
          <h3 class="text-xs font-black tracking-widest text-slate-400 uppercase italic">Verified Playlist</h3>
          <span class="text-[11px] text-slate-400 mono">Shown: <span id="shown-count">0</span></span>
        </div>

        <div id="list" class="space-y-3 h-[600px] overflow-y-auto custom-scroll pr-2"></div>

      </div>
    </div>
  </div>

  <!-- Drawer -->
  <aside id="drawer" class="drawer fixed top-0 right-0 h-full w-full sm:w-[420px] bg-black/55 backdrop-blur border-l border-white/10 z-50">
    <div class="h-full p-5 flex flex-col gap-4">
      <div class="flex items-start justify-between gap-2">
        <div>
          <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Channel Details</p>
          <h2 id="d-name" class="text-xl font-black mt-1">‚Äî</h2>
          <p id="d-status" class="text-[11px] text-slate-400 mono mt-1">‚Äî</p>
        </div>
        <button id="btn-close-drawer" class="glass px-3 py-2 rounded-xl text-xs font-bold">‚úï</button>
      </div>

      <div class="glass p-4 rounded-2xl">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">URL</p>
        <div class="flex gap-2">
          <input id="d-url" class="w-full bg-transparent border border-white/10 rounded-xl px-3 py-2 text-[12px] mono outline-none" readonly>
          <button id="btn-copy-drawer" class="glass-2 px-3 py-2 rounded-xl text-[11px] font-bold">Copy</button>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <button id="btn-fav" class="glass px-4 py-3 rounded-2xl text-xs font-black">‚òÜ Favorite</button>
        <button id="btn-remove" class="px-4 py-3 rounded-2xl text-xs font-black border border-red-500/40 bg-red-500/10 hover:bg-red-500/20 transition-all">Remove</button>
      </div>

      <div class="glass p-4 rounded-2xl">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">Tags (comma separated)</p>
        <input id="d-tags" placeholder="sports, news, movies" class="w-full bg-transparent border border-white/10 rounded-xl px-3 py-2 text-[12px] mono outline-none placeholder:text-slate-600">
        <p class="text-[11px] text-slate-400 mt-2">Tip: tags help filtering and organization.</p>
      </div>

      <div class="glass p-4 rounded-2xl">
        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">Meta</p>
        <div class="text-[12px] mono text-slate-300 space-y-1">
          <div>Last checked: <span id="d-last">‚Äî</span></div>
          <div>Last error: <span id="d-err">‚Äî</span></div>
        </div>
      </div>

      <div class="mt-auto text-[11px] text-slate-500">
        <p>Note: some streams block browser validation due to CORS. Those may show as ‚ÄúUnknown‚Äù until played.</p>
      </div>
    </div>
  </aside>

  <!-- Toasts -->
  <div id="toasts" class="fixed bottom-4 right-4 z-50 flex flex-col gap-2 w-[min(360px,calc(100vw-2rem))]"></div>

  <input type="file" id="import-file" accept=".m3u,.m3u8,.json" class="hidden" />

  <script src="app.js"></script>
</body>
</html>
